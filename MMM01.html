<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MMM01 - Pan Docs</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The single, most comprehensive technical reference to Game Boy available to the public.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <!-- Open Graph tags-->
        <meta name="og:site_name" content="summary" />
        <meta name="og:image" content="https://gbdev.io/pandocs/favicon.png" />
        <meta name="og:title" content="MMM01 - Pan Docs" />
        <meta name="og:description" content="The single, most comprehensive technical reference to Game Boy available to the public." />

        <!-- Twitter meta tags -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@gbdev0" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom/style.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="About.html">Foreword</a></li><li class="chapter-item affix "><a href="Authors.html">Acknowledgements</a></li><li class="chapter-item affix "><a href="History.html">History</a></li><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Overview</li><li class="chapter-item "><a href="Specifications.html"><strong aria-hidden="true">1.</strong> Specifications</a></li><li class="chapter-item "><a href="Memory_Map.html"><strong aria-hidden="true">2.</strong> Memory Map</a></li><li class="chapter-item affix "><li class="part-title">I/O Ports</li><li class="chapter-item "><a href="Rendering.html"><strong aria-hidden="true">3.</strong> Rendering</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Tile_Data.html"><strong aria-hidden="true">3.1.</strong> Tile Data</a></li><li class="chapter-item "><a href="Tile_Maps.html"><strong aria-hidden="true">3.2.</strong> Tile Maps</a></li><li class="chapter-item "><a href="OAM.html"><strong aria-hidden="true">3.3.</strong> OAM</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="OAM_DMA_Transfer.html"><strong aria-hidden="true">3.3.1.</strong> OAM DMA Transfer</a></li></ol></li><li class="chapter-item "><a href="LCDC.html"><strong aria-hidden="true">3.4.</strong> LCD Control</a></li><li class="chapter-item "><a href="STAT.html"><strong aria-hidden="true">3.5.</strong> LCD Status</a></li><li class="chapter-item "><a href="Scrolling.html"><strong aria-hidden="true">3.6.</strong> Scrolling</a></li><li class="chapter-item "><a href="Palettes.html"><strong aria-hidden="true">3.7.</strong> Palettes</a></li><li class="chapter-item "><a href="pixel_fifo.html"><strong aria-hidden="true">3.8.</strong> Pixel FIFO</a></li></ol></li><li class="chapter-item "><a href="Sound_Controller.html"><strong aria-hidden="true">4.</strong> Sound Controller</a></li><li class="chapter-item "><a href="Joypad_Input.html"><strong aria-hidden="true">5.</strong> Joypad Input</a></li><li class="chapter-item "><a href="Serial_Data_Transfer_(Link_Cable).html"><strong aria-hidden="true">6.</strong> Serial Data Transfer</a></li><li class="chapter-item "><a href="Timer_and_Divider_Registers.html"><strong aria-hidden="true">7.</strong> Timer and Divider Registers</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Timer_Obscure_Behaviour.html"><strong aria-hidden="true">7.1.</strong> Timer Obscure Behaviour</a></li></ol></li><li class="chapter-item "><a href="Interrupts.html"><strong aria-hidden="true">8.</strong> Interrupts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Interrupt_Sources.html"><strong aria-hidden="true">8.1.</strong> Interrupt Sources</a></li><li class="chapter-item "><a href="halt.html"><strong aria-hidden="true">8.2.</strong> HALT</a></li></ol></li><li class="chapter-item "><a href="CGB_Registers.html"><strong aria-hidden="true">9.</strong> CGB Registers</a></li><li class="chapter-item "><a href="IR.html"><strong aria-hidden="true">10.</strong> Infrared Communication</a></li><li class="chapter-item "><a href="SGB_Functions.html"><strong aria-hidden="true">11.</strong> SGB Functions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="SGB_Unlocking.html"><strong aria-hidden="true">11.1.</strong> Unlocking and Detecting SGB Functions</a></li><li class="chapter-item "><a href="SGB_Command_Packet.html"><strong aria-hidden="true">11.2.</strong> Command Packet Transfers</a></li><li class="chapter-item "><a href="SGB_VRAM_Transfer.html"><strong aria-hidden="true">11.3.</strong> VRAM Transfers</a></li><li class="chapter-item "><a href="SGB_Color_Palettes.html"><strong aria-hidden="true">11.4.</strong> Color Palettes Overview</a></li><li class="chapter-item "><a href="SGB_Command_Summary.html"><strong aria-hidden="true">11.5.</strong> Command Summary</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="SGB_Command_Pallete.html"><strong aria-hidden="true">11.5.1.</strong> Palette Commands</a></li><li class="chapter-item "><a href="SGB_Command_Attribute.html"><strong aria-hidden="true">11.5.2.</strong> Color Attribute Commands</a></li><li class="chapter-item "><a href="SGB_Command_Sound.html"><strong aria-hidden="true">11.5.3.</strong> Sound Functions</a></li><li class="chapter-item "><a href="SGB_Command_System.html"><strong aria-hidden="true">11.5.4.</strong> System Control Commands</a></li><li class="chapter-item "><a href="SGB_Command_Multiplayer.html"><strong aria-hidden="true">11.5.5.</strong> Multiplayer Command</a></li><li class="chapter-item "><a href="SGB_Command_Border.html"><strong aria-hidden="true">11.5.6.</strong> Border and OBJ Commands</a></li><li class="chapter-item "><a href="SGB_Command_Undocumented.html"><strong aria-hidden="true">11.5.7.</strong> Undocumented SGB commands</a></li></ol></li></ol></li><li class="chapter-item "><li class="part-title">CPU Specifications</li><li class="chapter-item "><a href="CPU_Registers_and_Flags.html"><strong aria-hidden="true">12.</strong> CPU Registers and Flags</a></li><li class="chapter-item "><a href="CPU_Instruction_Set.html"><strong aria-hidden="true">13.</strong> CPU Instruction Set</a></li><li class="chapter-item "><a href="CPU_Comparison_with_Z80.html"><strong aria-hidden="true">14.</strong> CPU Comparison with Z80</a></li><li class="chapter-item affix "><li class="part-title">Cartridges</li><li class="chapter-item "><a href="The_Cartridge_Header.html"><strong aria-hidden="true">15.</strong> The Cartridge Header</a></li><li class="chapter-item expanded "><a href="MBCs.html"><strong aria-hidden="true">16.</strong> MBCs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="nombc.html"><strong aria-hidden="true">16.1.</strong> No MBC</a></li><li class="chapter-item "><a href="MBC1.html"><strong aria-hidden="true">16.2.</strong> MBC1</a></li><li class="chapter-item "><a href="MBC2.html"><strong aria-hidden="true">16.3.</strong> MBC2</a></li><li class="chapter-item "><a href="MBC3.html"><strong aria-hidden="true">16.4.</strong> MBC3</a></li><li class="chapter-item "><a href="MBC5.html"><strong aria-hidden="true">16.5.</strong> MBC5</a></li><li class="chapter-item "><a href="MBC6.html"><strong aria-hidden="true">16.6.</strong> MBC6</a></li><li class="chapter-item "><a href="MBC7.html"><strong aria-hidden="true">16.7.</strong> MBC7</a></li><li class="chapter-item expanded "><a href="MMM01.html" class="active"><strong aria-hidden="true">16.8.</strong> MMM01</a></li><li class="chapter-item "><a href="HuC1.html"><strong aria-hidden="true">16.9.</strong> HuC1</a></li><li class="chapter-item "><a href="othermbc.html"><strong aria-hidden="true">16.10.</strong> Other MBCs</a></li></ol></li><li class="chapter-item "><li class="part-title">Accessories</li><li class="chapter-item "><a href="Gameboy_Printer.html"><strong aria-hidden="true">17.</strong> Game Boy Printer</a></li><li class="chapter-item "><a href="Gameboy_Camera.html"><strong aria-hidden="true">18.</strong> Game Boy Camera</a></li><li class="chapter-item "><a href="Four_Player_Adapter.html"><strong aria-hidden="true">19.</strong> 4-Player Adapter</a></li><li class="chapter-item "><a href="Shark_Cheats.html"><strong aria-hidden="true">20.</strong> Game Genie/Shark Cheats</a></li><li class="chapter-item affix "><li class="part-title">Other</li><li class="chapter-item "><a href="Power_Up_Sequence.html"><strong aria-hidden="true">21.</strong> Power-Up Sequence</a></li><li class="chapter-item "><a href="Reducing_Power_Consumption.html"><strong aria-hidden="true">22.</strong> Reducing Power Consumption</a></li><li class="chapter-item "><a href="Accessing_VRAM_and_OAM.html"><strong aria-hidden="true">23.</strong> Accessing VRAM and OAM</a></li><li class="chapter-item "><a href="OAM_Corruption_Bug.html"><strong aria-hidden="true">24.</strong> OAM Corruption Bug</a></li><li class="chapter-item "><a href="External_Connectors.html"><strong aria-hidden="true">25.</strong> External Connectors</a></li><li class="chapter-item "><a href="GBC_Approval_Process.html"><strong aria-hidden="true">26.</strong> GBC Approval Process</a></li><li class="spacer"></li><li class="chapter-item affix "><a href="References.html">References</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Pan Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/gbdev/pandocs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/gbdev/pandocs/edit/master/src/MMM01.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="mmm01"><a class="header" href="#mmm01">MMM01</a></h1>
<p>The MMM01 is a mapper specific to multi-game compilation cartridges. It emulates an MBC1 for the contained games, and supports containing a mix of games from 32 KiB ROMs with no RAM, up to the same maximum memory <em>per game</em> as the MBC1:</p>
<ul>
<li>max 512 KiB ROM with banked 8, 16, or 32 KiB RAM (default configuration)</li>
<li>max 2 MiB ROM with unbanked 8 KiB RAM (“multiplex” mode, never used commercially)</li>
</ul>
<p>Regardless of the size or number of the games in the compilation, the maximum total cartridge size supported by the MMM01 is the same: up to 8 MiB ROM and 128 KiB RAM.</p>
<p>The ROM and RAM banking numbers are extended compared to the MBC1 to allow for game selection, and
the lower bits (equivalent to the MBC1 bank registers) can be masked so some of those bits can also be used for game selection (for smaller games).
This allows up to 255x 32 KiB games, plus a 32 KiB menu, in an 8 MiB ROM.
RAM is more limited at only up to 16x 8 KiB RAM banks.
However, despite these generous capabilities, no MMM01 cartridge was released with more than 4 games, and only <em>one</em> contains any RAM at all.</p>
<p>The ROM and RAM “game select” banking bits do not have to be set to the same value, this allows an MMM01 cartridge to not waste RAM space on games that do not have RAM, or mix and match games that have differently-sized ROM or RAM by packing them in tightly in the overall ROM/RAM of the cartridge.</p>
<div class="box warning">
<p>The MMM01 can’t completely block access to RAM for a game, so if the cartridge contains RAM it’s recommended to assign any no-RAM games to the same single RAM bank to prevent no-RAM games from accessing or corrupting other games’ save RAM.</p>
</div>
<p>MMM01 starts up in a unique mode (“unmapped”) which always maps the <strong>last</strong> 32 KiB of the ROM to the 0000-7FFF address region regardless of the values in the bank/mode registers.
The correct ROM header (with Nintendo logo) therefore needs to be located at offset <code>(size - 32 KiB) + $100</code> in the ROM rather than the usual <code>$0000 + $100</code> (which contains the header of the first game in the collection instead).
MMM01 cartridges have a simple menu program in this last 32 KiB, which manipulates the additional MMM01 control bits, allowing game selection and setting the game size, before entering “mapped” mode and booting the selected game (see “Mapping Enable” below).</p>
<p>As the last 32 KiB of the ROM are reserved for the cartridge menu, it’s best to pack games into the ROM from largest to smallest to avoid having a game overlap the menu.
For example, the Taito Variety Pack contains three 128 KiB games and one 64 KiB game in a 512 KiB ROM chip, leaving 32 KiB unused and 32 KiB for the menu.</p>
<h2 id="memory"><a class="header" href="#memory">Memory</a></h2>
<h3 id="0000-3fff---rom-bank-x0-read-only"><a class="header" href="#0000-3fff---rom-bank-x0-read-only">0000-3FFF - ROM Bank $X0 (Read Only)</a></h3>
<p>On startup (in “unmapped” mode), this is mapped to the first half of the menu program in the last 32 KiB of the ROM.</p>
<p>When a game is mapped, this area normally contains the first 16 KiB (bank 00) of the game ROM.</p>
<p>If [multiplex is enabled[(&lt;#Multiplex Enable&gt;)], entering mode 1 allows mapping game ROM banks $20, $40, and $60 to this region.</p>
<h4 id="addressing-diagrams"><a class="header" href="#addressing-diagrams">Addressing diagrams</a></h4>
<p>When “unmapped”:</p>
<pre><code>                                    /------------- In a smaller cartridge, only the needed
                                    |              bits are used (e.g 512 KiB uses 19 bits)
                  /---------------------------\
Bits: 22 21 20 19 18 17 16 15 14 13 12 .. 01 00
      \_____________________/  | \____________/
                 |             |      \----------- From Game Boy address
                 |             \------------------ Always 0
                 \-------------------------------- Always 1
</code></pre>
<p>Mapped, multiplex disabled:</p>
<pre><code>Bits: 22 21 20 19 18 17 16 15 14 13 12 .. 01 00
      \___/ \___/ \____________/ \____________/
        |     |          |            \----------- From Game Boy address
        |     |          \------------------------ bitwise and of ROM Bank Low &amp; ROM Bank Mask
        |     \----------------------------------- ROM Bank Mid
        \----------------------------------------- ROM Bank High
</code></pre>
<h3 id="4000-7fff---rom-bank-01-7f-read-only"><a class="header" href="#4000-7fff---rom-bank-01-7f-read-only">4000-7FFF - ROM Bank $01-7F (Read Only)</a></h3>
<p>On startup (in “unmapped” mode), this is mapped to the second half of the menu program in the last 32 KiB of the ROM.</p>
<p>When a game is mapped, this area may contain any of the further 16 KiB banks of the game ROM, except for game banks $00, $20, $40, or $60.
If one of those banks is selected, the low bit is forced to 1 and that bank is mapped instead ($01, $21, $41, or $61).</p>
<p>i.e. in mapped mode, if <code>(ROM Bank Low) &amp; ~(ROM Bank Mask)</code> is equal to $00 (indicating bank $00 within the game ROM), <code>(ROM Bank Low) | 1</code> is used instead.
As an example, if ROM Bank Low is set to $10, and the ROM Bank Mask is set to $30, then the bank within the game ROM would be <code>($10) &amp; ~($30) = $00</code>.
As game bank $00 is disallowed, the low bit is forced on, mapping bank $11 instead of $10.</p>
<p>If [multiplex is enabled[(&lt;#Multiplex Enable&gt;)], the MMM01 has the same limitation as MBC1 regarding accessing game ROM banks $20, $40, and $60 - they can only be mapped to 0000-3FFF (in mode 1), and not to 4000-7FFF.</p>
<h4 id="addressing-diagrams-1"><a class="header" href="#addressing-diagrams-1">Addressing diagrams</a></h4>
<p>When “unmapped”:</p>
<pre><code>Bits: 22 21 20 19 18 17 16 15 14 13 12 .. 01 00
      \_____________________/  | \____________/
                 |             |      \----------- From Game Boy address
                 |             \------------------ Always 1? See note
                 \-------------------------------- Always 1
</code></pre>
<div class="box warning">
<p class="box-title">TO BE VERIFIED</p><p>It’s suspected the lowest bit of ROM Bank Low (post $00 -&gt; $01 remapping) still affects the bank mapped to the 4000-7FFF region in “unmapped” mode the same as it does in mapped mode.
Most of the time this would still be a 1, but during game selection it could momentarily go to 0 in between setting the game select bits in <a href="MMM01.html#bits-0-4-rom-bank-low">ROM Bank Low</a> and masking them as such in <a href="MMM01.html#bits-1-5-rom-bank-mask">ROM Bank Mask</a>.</p>
</div>
<p>Mapped, multiplex disabled:</p>
<pre><code>Bits: 22 21 20 19 18 17 16 15 14 13 12 .. 01 00
      \___/ \___/ \____________/ \____________/
        |     |          |            \----------- From Game Boy address
        |     |          \------------------------ ROM Bank Low (complete value, not masked)
        |     |                                     anti-masked $00 is remapped to $01 (see explanation above)
        |     \----------------------------------- ROM Bank Mid
        \----------------------------------------- ROM Bank High
</code></pre>
<h3 id="a000-bfff---ram-bank-00-03-if-any-readwrite"><a class="header" href="#a000-bfff---ram-bank-00-03-if-any-readwrite">A000-BFFF - RAM Bank $00-03, if any (Read/Write)</a></h3>
<p>This area is used to address external SRAM in the cartridge (if any).
The RAM is only accessible <a href="Gameboy_Camera.html#0000-1fff---ram-enable-write-only">if RAM is enabled</a>, otherwise reads return open bus values (often $FF, but not guaranteed) and writes are ignored.</p>
<p>External RAM is often battery-backed, allowing for the storage of game data while the Game Boy is turned off, or if the cartridge is removed from the Game Boy.</p>
<p>It is currently unknown whether RAM access is possible while in unmapped mode.</p>
<h4 id="addressing-diagrams-2"><a class="header" href="#addressing-diagrams-2">Addressing diagrams</a></h4>
<p>In mode 0:</p>
<pre><code>Bits: 16 15 14 13 12 .. 01 00
      \___/ \___/ \_________/
        |     |        \-------- From Game Boy address
        |     \----------------- bitwise and of RAM Bank Low &amp; RAM Bank Mask
        \----------------------- RAM Bank High
</code></pre>
<p>In mode 1:</p>
<pre><code>Bits: 16 15 14 13 12 .. 01 00
      \___/ \___/ \_________/
        |     |        \-------- From Game Boy address
        |     \----------------- RAM Bank Low (complete value, not masked)
        \----------------------- RAM Bank High
</code></pre>
<h2 id="registers"><a class="header" href="#registers">Registers</a></h2>
<p>The MMM01 registers are extensions of the MBC1 registers.
In “mapped” mode, the extra bits cannot be written to, and the MMM01 emulates an MBC1.
In “unmapped” mode, the extra bits are writeable, allowing the menu program to select which game to play and configure its size and RAM access.</p>
<p>All the MMM01 registers are 7-bits in size and set to $00 on power-up.
For the ROM Bank Number register, this behaves as if it was set to $01.</p>
<h3 id="0000-1fff---ram-enable-write-only"><a class="header" href="#0000-1fff---ram-enable-write-only">0000-1FFF - RAM Enable (Write Only)</a></h3>
<pre><code>Bits: X 6 5 4 3 2 1 0
        | \_/ \_____/
        |  |      \----- Bits 0-3: RAM Enable
        |  \------------ Bits 4-5: RAM Bank Mask
        \--------------- Bit 6: Mapping Enable
</code></pre>
<h4 id="bits-0-3-ram-enable"><a class="header" href="#bits-0-3-ram-enable">Bits 0-3: RAM Enable</a></h4>
<p>As per MBC1, writing $Ah to the lower 4 bits enables the external RAM, and any other value disables it.
The external RAM is automatically disabled when the Game Boy is powered off or the cartridge is removed.</p>
<h4 id="bits-4-5-ram-bank-mask"><a class="header" href="#bits-4-5-ram-bank-mask">Bits 4-5: RAM Bank Mask</a></h4>
<p><em>Can only be changed in “unmapped” mode.</em></p>
<p>These two bits act as “write locks” to the matching bits in the RAM Bank Low register.
Any attempt to write to those bits while its matching bit in this register is 1 is prevented.
Writes to masked bits are prevented even in “unmapped” mode.</p>
<p>The purpose of the mask is to lock some RAM banking bits as “game selection”, instead of letting games freely toggle them.
Setting these bits effectively reduces the size of the ram available to the game that’s about to be booted:</p>
<table><thead><tr><th>Mask</th><th>Game RAM</th></tr></thead><tbody>
<tr><td>00</td><td>32 KiB</td></tr>
<tr><td>10</td><td>16 KiB</td></tr>
<tr><td>11</td><td>8 KiB</td></tr>
</tbody></table>
<p>If [multiplex is enabled[(&lt;#Multiplex Enable&gt;)], this mask still applies to the RAM Bank Low register, even though that register is used as part of the <strong>ROM</strong> bank number in multiplex mode.
This has the effect of reducing the ROM size instead of the RAM size, as follows:</p>
<table><thead><tr><th>Mask</th><th>Game ROM</th></tr></thead><tbody>
<tr><td>00</td><td>2 MiB</td></tr>
<tr><td>10</td><td>1 MiB</td></tr>
<tr><td>11</td><td>512 KiB*</td></tr>
</tbody></table>
<p>Setting the RAM Bank Mask to 11 when multiplex is enabled is pointless - the whole point of multiplex mode is to support 1 MiB or larger MBC1 games.</p>
<h4 id="bit-6-mapping-enable"><a class="header" href="#bit-6-mapping-enable">Bit 6: Mapping Enable</a></h4>
<p><em>Can only be changed in “unmapped” mode.</em></p>
<p>When writing 1 to this bit, the MMM01 enters “mapped” mode. This immediately begins MBC1 emulation, mapping in the selected banks of the game ROM (typically $00 and $01 within the game’s subsection of the cartridge ROM) and prevents write access to any of the MMM01 extended control bits.</p>
<p>It is unknown if setting bit 6 to enter “mapped” mode will honor or ignore the value simultaneously being written to bits 4-5 (RAM Bank Mask).
The only released MMM01 cartridge containing RAM performs two separate writes to set the bank mask before enabling mapping, with the same mask set in both writes.</p>
<h3 id="2000-3fff---rom-bank-number-write-only"><a class="header" href="#2000-3fff---rom-bank-number-write-only">2000-3FFF - ROM Bank Number (Write Only)</a></h3>
<pre><code>Bits: X 6 5 4 3 2 1 0
        \_/ \_______/
         |       \------ Bits 0-4: ROM Bank Low
         \-------------- Bits 5-6: ROM Bank Mid
</code></pre>
<h4 id="bits-0-4-rom-bank-low"><a class="header" href="#bits-0-4-rom-bank-low">Bits 0-4: ROM Bank Low</a></h4>
<p>This is equivalent to the MBC1 ROM Bank register, and primarily selects which bank of the game ROM is visible in the 4000-7FFF region.
It can be masked to reduce its size, reserving some bits for game select (see <a href="MMM01.html#bits-1-5-rom-bank-mask">ROM Bank Mask</a>).</p>
<p>If the <em>unmasked</em> bits are all 0, it behaves as if the lowest bit is set to 1 (as per MBC1 behaviour, attempting to map bank $00 of the game ROM maps bank $01 instead).
However, the actual value of the register doesn’t change, as changes to <a href="MMM01.html#bits-1-5-rom-bank-mask">ROM Bank Mask</a> can undo this remapping.</p>
<h4 id="bits-5-6-rom-bank-mid"><a class="header" href="#bits-5-6-rom-bank-mid">Bits 5-6: ROM Bank Mid</a></h4>
<p><em>Can only be changed in “unmapped” mode.</em></p>
<p>This register represents an additional two bits of ROM bank number, for game selection.
Affects both the 0000-3FFF and 4000-7FFF region.
Can only be used for game selection, as it’s not writeable once entering a game (mapped mode).</p>
<p>If [multiplex is enabled[(&lt;#Multiplex Enable&gt;)], functionality is swapped with <a href="MMM01.html#bits-0-1-ram-bank-low">RAM Bank Low</a> allowing for larger game ROM.</p>
<h3 id="4000-5fff---ram-bank-number-write-only"><a class="header" href="#4000-5fff---ram-bank-number-write-only">4000-5FFF - RAM Bank Number (Write Only)</a></h3>
<pre><code>Bits: X 6 5 4 3 2 1 0
        | \_/ \_/ \_/
        |  |   |   \---- Bits 0-1: RAM Bank Low
        |  |   \-------- Bits 2-3: RAM Bank High
        |  \------------ Bits 4-5: ROM Bank High
        \--------------- Bit 6: MBC1 Mode Write Disable
</code></pre>
<h4 id="bits-0-1-ram-bank-low"><a class="header" href="#bits-0-1-ram-bank-low">Bits 0-1: RAM Bank Low</a></h4>
<p>This is equivalent to the MBC1 RAM Bank register.
It can be masked to reduce its size, reserving some bits for game select (see <a href="MMM01.html#bits-4-5-ram-bank-mask">RAM Bank Mask</a>).</p>
<p>If [multiplex is enabled[(&lt;#Multiplex Enable&gt;)], functionality is swapped with <a href="MMM01.html#bits-5-6-rom-bank-mid">ROM Bank Mid</a> allowing for larger game ROM.</p>
<h4 id="bits-1-2-ram-bank-high"><a class="header" href="#bits-1-2-ram-bank-high">Bits 1-2: RAM Bank High</a></h4>
<p><em>Can only be changed in “unmapped” mode.</em></p>
<p>This register represents an additional two bits of RAM bank number, for game selection.
Can only be used for game selection, as it’s not writeable once entering a game (mapped mode).</p>
<h4 id="bits-4-5-rom-bank-high"><a class="header" href="#bits-4-5-rom-bank-high">Bits 4-5: ROM Bank High</a></h4>
<p><em>Can only be changed in “unmapped” mode.</em></p>
<p>This register represents <em>another</em> two bits of ROM bank number, for game selection.
Affects both the 0000-3FFF and 4000-7FFF region.
Can only be used for game selection, as it’s not writeable once entering a game (mapped mode).</p>
<h4 id="bit-6-mbc1-mode-write-lock"><a class="header" href="#bit-6-mbc1-mode-write-lock">Bit 6: MBC1 Mode Write Lock</a></h4>
<p><em>Can only be changed in “unmapped” mode.</em></p>
<p>When set to 1, prevents changes to the <a href="MMM01.html#bit-0-mbc1-mode-select">MBC1 Mode Select</a>.
This might be for compatibility with games designed for non-MBC1 mappers that don’t expect the MBC1 mode select register to exist.</p>
<h3 id="6000-7fff---banking-mode-select-write-only"><a class="header" href="#6000-7fff---banking-mode-select-write-only">6000-7FFF - Banking Mode Select (Write Only)</a></h3>
<pre><code>Bits: X 6 5 4 3 2 X 0
        | \_______/ |
        |    |      \--- MBC1 Mode Select
        |    \---------- ROM Bank Mask
        \--------------- Multiplex Enable
</code></pre>
<h4 id="bit-0-mbc1-mode-select"><a class="header" href="#bit-0-mbc1-mode-select">Bit 0: MBC1 Mode Select</a></h4>
<p>This is equivalent to the MBC1 Mode Select register.</p>
<p>This 1-bit register selects between the two MBC1 banking modes.
The behaviour varies depending on whether multiplex is enabled or disabled.</p>
<p><strong>Multiplex disabled</strong></p>
<ul>
<li>0 = RAM Banking Disabled (default)</li>
<li>1 = RAM Banking Enabled</li>
</ul>
<p>In mode 0, the A000-BFFF region is locked to bank 0 of the game RAM.
The unmasked bits of <a href="MMM01.html#bits-0-1-ram-bank-low">RAM Bank Low</a> are treated as 0.</p>
<p>In mode 1, the A000-BFFF region can be bank-switched by the game as the full RAM Bank Low register is used.</p>
<p><strong>Multiplex enabled</strong></p>
<ul>
<li>0 = Simple ROM Banking Mode (default)</li>
<li>1 = Advanced ROM Banking Mode</li>
</ul>
<p>In mode 0, the 0000-3FFF region is locked to bank 0 of the game ROM.
The unmasked bits of <a href="MMM01.html#bits-0-1-ram-bank-low">RAM Bank Low</a> are treated as 0 for accesses to the 0000-3FFF region, matching the behaviour of <a href="MMM01.html#bits-0-4-rom-bank-low">ROM Bank Low</a>.</p>
<p>In mode 1, the 0000-3FFF region can be bank-switched using the RAM Bank Low register — allowing access to game ROM banks $20, $40, and $60.</p>
<h4 id="bits-1-5-rom-bank-mask"><a class="header" href="#bits-1-5-rom-bank-mask">Bits 1-5: ROM Bank Mask</a></h4>
<p><em>Can only be changed in “unmapped” mode.</em></p>
<p>These five bits act as “write locks” to the matching bits in the <a href="MMM01.html#bits-0-4-rom-bank-low">ROM Bank Low</a> register.
Any attempt to write to the bits in ROM Bank Low while its matching bit in this register is 1 is prevented.
Writes to masked bits are prevented even in “unmapped” mode.</p>
<p>The value written to the lowest bit of the mask is ignored, and treated as always zero.
As a result, the lowest bit of ROM Bank Low is always writeable.</p>
<p>The purpose of the mask is to lock some ROM banking bits as “game selection”, instead of letting games freely toggle them.
Setting these bits effectively reduces the size of the ROM accessible to the game that’s about to be booted:</p>
<table><thead><tr><th>Mask</th><th>Game ROM</th></tr></thead><tbody>
<tr><td>00000</td><td>512 KiB</td></tr>
<tr><td>10000</td><td>256 KiB</td></tr>
<tr><td>11000</td><td>128 KiB</td></tr>
<tr><td>11100</td><td>64 KiB</td></tr>
<tr><td>11110</td><td>32 KiB</td></tr>
</tbody></table>
<p>Note: changing the mask can alter which bank would be mapped.
Only the <em>unmasked</em> bits of <a href="MMM01.html#bits-0-4-rom-bank-low">ROM Bank Low</a> are used for the “<a href="MMM01.html#4000-7fff---rom-bank-01-7f-read-only">attempting to map bank 0 maps bank 1</a>” logic, and it updates live if the ROM Bank Mask changes.
ROM Bank Low itself doesn’t change when this happens — only the value used for calculating the bank number.</p>
<p>If [multiplex is enabled[(&lt;#Multiplex Enable&gt;)], the <a href="MMM01.html#bits-4-5-ram-bank-mask">RAM Bank Mask</a> affects ROM banking as well.
In this case the ROM Bank Mask should be set to 00000 to avoid masking bits in the <em>middle</em> of the full game ROM bank number.</p>
<h4 id="multiplex-enable"><a class="header" href="#multiplex-enable">Multiplex Enable</a></h4>
<p><em>Can only be changed in “unmapped” mode.</em></p>
<p>When set to 1, swaps the functionality of <a href="MMM01.html#bits-0-1-ram-bank-low">RAM Bank Low</a> and <a href="MMM01.html#bits-5-6-rom-bank-mid">ROM Bank Mid</a>.
As RAM Bank Low is writeable in mapped mode, this allows for the contained game to control (up to, if unmasked in “RAM Bank Mask”) two extra bits of the full ROM bank number, allowing for larger game ROMs at the cost of only 8 KiB of external RAM.</p>
<p>This is equivalent to the <a href="MBC1.html#mbc1">“large ROM” wiring of an MBC1 cartridge</a>.</p>
<h2 id="multiplex-addressing-diagrams"><a class="header" href="#multiplex-addressing-diagrams">Multiplex addressing diagrams</a></h2>
<p>If [multiplex is enabled[(&lt;#Multiplex Enable&gt;)], the addressing diagrams change as follows (changes marked with <code>*</code>):</p>
<h3 id="0000-3fff---rom-bank-x0"><a class="header" href="#0000-3fff---rom-bank-x0">0000-3FFF - ROM Bank X0</a></h3>
<p>No change to “unmapped” mode.</p>
<p>Mapped, Multiplexed, Mode 0:</p>
<pre><code>Bits: 22 21 20 19 18 17 16 15 14 13 12 .. 01 00
      \___/ \___/ \____________/ \____________/
        |     |          |            \----------- From Game Boy address
        |     |          \------------------------ bitwise and of ROM Bank Low &amp; ROM Bank Mask
        |     \----------------------------------- * bitwise and of RAM Bank Low &amp; RAM Bank Mask
        \----------------------------------------- ROM Bank High
</code></pre>
<p>Mapped, Multiplexed, Mode 1:</p>
<pre><code>Bits: 22 21 20 19 18 17 16 15 14 13 12 .. 01 00
      \___/ \___/ \____________/ \____________/
        |     |          |            \----------- From Game Boy address
        |     |          \------------------------ bitwise and of ROM Bank Low &amp; ROM Bank Mask
        |     \----------------------------------- * RAM Bank Low (complete value, not masked)
        \----------------------------------------- ROM Bank High
</code></pre>
<h5 id="4000-7fff---rom-bank-01-7f"><a class="header" href="#4000-7fff---rom-bank-01-7f">4000-7FFF - ROM Bank 01-7F</a></h5>
<p>No change to “unmapped” mode.</p>
<p>Mapped, Multiplexed, Mode 0 or 1:</p>
<pre><code>Bits: 22 21 20 19 18 17 16 15 14 13 12 .. 01 00
      \___/ \___/ \____________/ \____________/
        |     |          |            \----------- From Game Boy address
        |     |          \------------------------ ROM Bank Low (complete value, not masked)
        |     \----------------------------------- * RAM Bank Low (complete value, not masked)
        \----------------------------------------- ROM Bank High
</code></pre>
<h5 id="a000-bfff---ram-bank-00-03"><a class="header" href="#a000-bfff---ram-bank-00-03">A000-BFFF - RAM Bank 00-03</a></h5>
<p>Multiplexed, Mode 0 or 1:</p>
<pre><code>Bits: 16 15 14 13 12 .. 01 00
      \___/ \___/ \_________/
        |     |        \-------- From Game Boy address
        |     \----------------- * ROM Bank Mid
        \----------------------- RAM Bank High
</code></pre>
<h2 id="operation-notes"><a class="header" href="#operation-notes">Operation Notes</a></h2>
<p>Because the MMM01 has registers which disable write access to other registers, it is optimal to set the value of certain registers before others. The optimal order is:</p>
<ol>
<li>ROM Bank Register ($2000) — contains ROM Bank</li>
<li>Mode Register ($6000) — contains ROM Bank Mask, and Mode</li>
<li>RAM Register ($4000) — contains Mode Write Disable, and RAM Bank</li>
<li>RAM Enable ($0000) — contains RAM Bank Mask, and Mapping Enable</li>
</ol>
<p>The majority of released MMM01 cartridges stick to this order.</p>
<h3 id="references"><a class="header" href="#references">References</a></h3>
<ul>
<li>Source: <a href="https://wiki.tauwasser.eu/view/MMM01">MMM01</a> on tauwasser wiki</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="MBC7.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="HuC1.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="MBC7.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="HuC1.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
