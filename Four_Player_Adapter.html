<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>4-Player Adapter - Pan Docs</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The single, most comprehensive technical reference to Game Boy available to the public.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <!-- Open Graph tags-->
        <meta name="og:site_name" content="summary" />
        <meta name="og:image" content="https://gbdev.io/pandocs/favicon.png" />
        <meta name="og:title" content="4-Player Adapter - Pan Docs" />
        <meta name="og:description" content="The single, most comprehensive technical reference to Game Boy available to the public." />

        <!-- Twitter meta tags -->
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@gbdev0" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom/style.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="About.html">Foreword</a></li><li class="chapter-item affix "><a href="Authors.html">Acknowledgements</a></li><li class="chapter-item affix "><a href="History.html">History</a></li><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Overview</li><li class="chapter-item "><a href="Specifications.html"><strong aria-hidden="true">1.</strong> Specifications</a></li><li class="chapter-item "><a href="Memory_Map.html"><strong aria-hidden="true">2.</strong> Memory Map</a></li><li class="chapter-item affix "><li class="part-title">I/O Ports</li><li class="chapter-item "><a href="Rendering.html"><strong aria-hidden="true">3.</strong> Rendering</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Tile_Data.html"><strong aria-hidden="true">3.1.</strong> Tile Data</a></li><li class="chapter-item "><a href="Tile_Maps.html"><strong aria-hidden="true">3.2.</strong> Tile Maps</a></li><li class="chapter-item "><a href="OAM.html"><strong aria-hidden="true">3.3.</strong> OAM</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="OAM_DMA_Transfer.html"><strong aria-hidden="true">3.3.1.</strong> OAM DMA Transfer</a></li></ol></li><li class="chapter-item "><a href="LCDC.html"><strong aria-hidden="true">3.4.</strong> LCD Control</a></li><li class="chapter-item "><a href="STAT.html"><strong aria-hidden="true">3.5.</strong> LCD Status</a></li><li class="chapter-item "><a href="Scrolling.html"><strong aria-hidden="true">3.6.</strong> Scrolling</a></li><li class="chapter-item "><a href="Palettes.html"><strong aria-hidden="true">3.7.</strong> Palettes</a></li><li class="chapter-item "><a href="pixel_fifo.html"><strong aria-hidden="true">3.8.</strong> Pixel FIFO</a></li></ol></li><li class="chapter-item "><a href="Sound_Controller.html"><strong aria-hidden="true">4.</strong> Sound Controller</a></li><li class="chapter-item "><a href="Joypad_Input.html"><strong aria-hidden="true">5.</strong> Joypad Input</a></li><li class="chapter-item "><a href="Serial_Data_Transfer_(Link_Cable).html"><strong aria-hidden="true">6.</strong> Serial Data Transfer</a></li><li class="chapter-item "><a href="Timer_and_Divider_Registers.html"><strong aria-hidden="true">7.</strong> Timer and Divider Registers</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Timer_Obscure_Behaviour.html"><strong aria-hidden="true">7.1.</strong> Timer Obscure Behaviour</a></li></ol></li><li class="chapter-item "><a href="Interrupts.html"><strong aria-hidden="true">8.</strong> Interrupts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Interrupt_Sources.html"><strong aria-hidden="true">8.1.</strong> Interrupt Sources</a></li><li class="chapter-item "><a href="halt.html"><strong aria-hidden="true">8.2.</strong> HALT</a></li></ol></li><li class="chapter-item "><a href="CGB_Registers.html"><strong aria-hidden="true">9.</strong> CGB Registers</a></li><li class="chapter-item "><a href="IR.html"><strong aria-hidden="true">10.</strong> Infrared Communication</a></li><li class="chapter-item "><a href="SGB_Functions.html"><strong aria-hidden="true">11.</strong> SGB Functions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="SGB_Unlocking.html"><strong aria-hidden="true">11.1.</strong> Unlocking and Detecting SGB Functions</a></li><li class="chapter-item "><a href="SGB_Command_Packet.html"><strong aria-hidden="true">11.2.</strong> Command Packet Transfers</a></li><li class="chapter-item "><a href="SGB_VRAM_Transfer.html"><strong aria-hidden="true">11.3.</strong> VRAM Transfers</a></li><li class="chapter-item "><a href="SGB_Color_Palettes.html"><strong aria-hidden="true">11.4.</strong> Color Palettes Overview</a></li><li class="chapter-item "><a href="SGB_Command_Summary.html"><strong aria-hidden="true">11.5.</strong> Command Summary</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="SGB_Command_Pallete.html"><strong aria-hidden="true">11.5.1.</strong> Palette Commands</a></li><li class="chapter-item "><a href="SGB_Command_Attribute.html"><strong aria-hidden="true">11.5.2.</strong> Color Attribute Commands</a></li><li class="chapter-item "><a href="SGB_Command_Sound.html"><strong aria-hidden="true">11.5.3.</strong> Sound Functions</a></li><li class="chapter-item "><a href="SGB_Command_System.html"><strong aria-hidden="true">11.5.4.</strong> System Control Commands</a></li><li class="chapter-item "><a href="SGB_Command_Multiplayer.html"><strong aria-hidden="true">11.5.5.</strong> Multiplayer Command</a></li><li class="chapter-item "><a href="SGB_Command_Border.html"><strong aria-hidden="true">11.5.6.</strong> Border and OBJ Commands</a></li><li class="chapter-item "><a href="SGB_Command_Undocumented.html"><strong aria-hidden="true">11.5.7.</strong> Undocumented SGB commands</a></li></ol></li></ol></li><li class="chapter-item "><li class="part-title">CPU Specifications</li><li class="chapter-item "><a href="CPU_Registers_and_Flags.html"><strong aria-hidden="true">12.</strong> CPU Registers and Flags</a></li><li class="chapter-item "><a href="CPU_Instruction_Set.html"><strong aria-hidden="true">13.</strong> CPU Instruction Set</a></li><li class="chapter-item "><a href="CPU_Comparison_with_Z80.html"><strong aria-hidden="true">14.</strong> CPU Comparison with Z80</a></li><li class="chapter-item affix "><li class="part-title">Cartridges</li><li class="chapter-item "><a href="The_Cartridge_Header.html"><strong aria-hidden="true">15.</strong> The Cartridge Header</a></li><li class="chapter-item "><a href="MBCs.html"><strong aria-hidden="true">16.</strong> MBCs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="nombc.html"><strong aria-hidden="true">16.1.</strong> No MBC</a></li><li class="chapter-item "><a href="MBC1.html"><strong aria-hidden="true">16.2.</strong> MBC1</a></li><li class="chapter-item "><a href="MBC2.html"><strong aria-hidden="true">16.3.</strong> MBC2</a></li><li class="chapter-item "><a href="MBC3.html"><strong aria-hidden="true">16.4.</strong> MBC3</a></li><li class="chapter-item "><a href="MBC5.html"><strong aria-hidden="true">16.5.</strong> MBC5</a></li><li class="chapter-item "><a href="MBC6.html"><strong aria-hidden="true">16.6.</strong> MBC6</a></li><li class="chapter-item "><a href="MBC7.html"><strong aria-hidden="true">16.7.</strong> MBC7</a></li><li class="chapter-item "><a href="HuC1.html"><strong aria-hidden="true">16.8.</strong> HuC1</a></li><li class="chapter-item "><a href="othermbc.html"><strong aria-hidden="true">16.9.</strong> Other MBCs</a></li></ol></li><li class="chapter-item "><li class="part-title">Accessories</li><li class="chapter-item "><a href="Gameboy_Printer.html"><strong aria-hidden="true">17.</strong> Game Boy Printer</a></li><li class="chapter-item "><a href="Gameboy_Camera.html"><strong aria-hidden="true">18.</strong> Game Boy Camera</a></li><li class="chapter-item expanded "><a href="Four_Player_Adapter.html" class="active"><strong aria-hidden="true">19.</strong> 4-Player Adapter</a></li><li class="chapter-item "><a href="Shark_Cheats.html"><strong aria-hidden="true">20.</strong> Game Genie/Shark Cheats</a></li><li class="chapter-item affix "><li class="part-title">Other</li><li class="chapter-item "><a href="Power_Up_Sequence.html"><strong aria-hidden="true">21.</strong> Power-Up Sequence</a></li><li class="chapter-item "><a href="Reducing_Power_Consumption.html"><strong aria-hidden="true">22.</strong> Reducing Power Consumption</a></li><li class="chapter-item "><a href="Accessing_VRAM_and_OAM.html"><strong aria-hidden="true">23.</strong> Accessing VRAM and OAM</a></li><li class="chapter-item "><a href="OAM_Corruption_Bug.html"><strong aria-hidden="true">24.</strong> OAM Corruption Bug</a></li><li class="chapter-item "><a href="External_Connectors.html"><strong aria-hidden="true">25.</strong> External Connectors</a></li><li class="chapter-item "><a href="GBC_Approval_Process.html"><strong aria-hidden="true">26.</strong> GBC Approval Process</a></li><li class="spacer"></li><li class="chapter-item affix "><a href="References.html">References</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Pan Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/gbdev/pandocs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/gbdev/pandocs/edit/master/src/Four_Player_Adapter.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="4-player-adapter"><a class="header" href="#4-player-adapter">4-Player Adapter</a></h1>
<p>The 4-Player Adapter (DMG-07) is an accessory that allows 4 Game Boys
to connect for multiplayer via <a href="./Serial_Data_Transfer_(Link_Cable).html">serial data transfer</a>.
The device is primarily designed for DMG consoles, with later models
requiring Link Cable adapters.</p>
<h2 id="communication"><a class="header" href="#communication">Communication</a></h2>
<p>The DMG-07 protocol can be divided into 2 sections, the “ping” phase, and
the “transmission” phase. The initial ping phase involves sending packets
back and forth between connected Game Boys probing for their current
connection status. Afterwards, the DMG-07 enters into transmission mode
where the Game Boys exchange data across the network.</p>
<p>A very important thing to note is that all Game Boys transfer data across
the DMG-07 via an external clock source. Apparently, the clock source is
provided by the DMG-07 itself. Trying to send data via an internal clock
results in garbage data.</p>
<h3 id="ping-phase"><a class="header" href="#ping-phase">Ping Phase</a></h3>
<p>When a “master” Game Boy (Player 1) is first connected to the adapter,
setting Bit 7 of SC to 1 and setting Bit 0 of SC to 0 causes the accessory
to send out “ping” packets periodically. All connected Game Boys will
receive 4 bytes as part of the ping packet at a rate of about 2048 bits
per second, or about 256 bytes per second. Essentially, the ping seems to
run 1/4 as fast as the clock used for normal serial transfers on the DMG
(1KB/s). The ping data looks like this:</p>
<table><thead><tr><th>Byte</th><th>Value</th><th>Description</th></tr></thead><tbody>
<tr><td>1</td><td>0xFE</td><td>ID Byte</td></tr>
<tr><td>2</td><td>0x??</td><td>STAT1</td></tr>
<tr><td>3</td><td>0x??</td><td>STAT2</td></tr>
<tr><td>4</td><td>0x??</td><td>STAT3</td></tr>
</tbody></table>
<p>3 “STAT” bytes are sent indicating the current connection status of the other
Game Boys. Each byte is usually the same, however, sometimes the status can
change mid-way through a ping, typically on STAT2 or STAT3. Each STAT byte
looks like such:</p>
<table><thead><tr><th>Bit</th><th>Name</th></tr></thead><tbody>
<tr><td>7</td><td>Player 4 Connected</td></tr>
<tr><td>6</td><td>Player 3 Connected</td></tr>
<tr><td>5</td><td>Player 2 Connected</td></tr>
<tr><td>4</td><td>Player 1 Connected</td></tr>
<tr><td>0-2</td><td>Player ID (1-4)</td></tr>
</tbody></table>
<p>The Player ID’s value is determined by whichever port a Game Boy is connected
to. As more Game Boys connect, the upper bits of the STAT bytes are turned on.</p>
<p>When talking about Game Boys and the “connection”, this refers to a Game Boy
properly responding to STAT1 and STAT2 bytes when receiving a ping packet from
the DMG-07. In this way, the Game Boy broadcasts across the Link Cable network
that it is an active participant in communications. It also acts as a sort of
acknowledgement signal, where software can drop a Game Boy if the DMG-07
detects an improper response during a ping, or a Game Boy simply quits the
network. The proper response is to send 0x88 <em>after</em> receiving the ID Byte and
STAT1, in which case the upper-half of STAT1, STAT2, and STAT3 are updated to
show that a Game Boy is “connected”. If for whatever reason, the
acknowledgement codes are not sent, the above bits are unset.</p>
<p>Some examples of ping packets are shown below:</p>
<table><thead><tr><th>Packet</th><th>Description</th></tr></thead><tbody>
<tr><td><code>0xFE 0x01 0x01 0x01</code></td><td>Ping packet received by Player 1 with no other Game Boys connected.</td></tr>
<tr><td><code>0xFE 0x11 0x11 0x11</code></td><td>Ping packet received by Player 1 when Player 1 has connected.</td></tr>
<tr><td><code>0xFE 0x31 0x31 0x31</code></td><td>Ping packet received by Player 1 when Players 1 &amp; 2 have connected.</td></tr>
<tr><td><code>0xFE 0x71 0x71 0x71</code></td><td>Ping packet received by Player 1 when Players 1, 2, &amp; 3 have connected.</td></tr>
<tr><td><code>0xFE 0x62 0x62 0x62</code></td><td>Ping packet received by Player 2 when Players 2 &amp; 3 are connected (but not Player 1).</td></tr>
</tbody></table>
<p>It’s possible to have situations where some players are connected but others
are not; the gaps don’t matter. For example, Player 1 and Player 4 can be
connected, while Player 2 and Player 3 can be disconnected (or non-existant,
same thing); most games do not care so long as Player 1 is active, as that
Game Boy acts as master and orchestrates the multiplayer session from a
software point of view. Because of the way the DMG-07 hardcodes player IDs
based on which port a Game Boy is physically connected to, in the above
situation Player 4 wouldn’t suddenly become Player 2.</p>
<p>During the ping phase, the master Game Boy is capable of setting up two
parameters that will be used during the transmission phase. The clock rate for
the transmission phase can be adjusted, as well as the packet size each Game
Boy will use. The master Game Boy needs to respond with one byte for STAT2
and STAT3 respectively. The chart below illustrates how a master Game Boy
should respond to all bytes in a ping packet:</p>
<pre><code>----------------------------
DMG-07		Game Boy
----------------------------
0xFE	&lt;--&gt;	(ACK1) = 0x88
STAT1	&lt;--&gt;	(ACK2) = 0x88	
STAT2	&lt;--&gt;	(RATE) = Link Cable Speed 
STAT3	&lt;--&gt;	(SIZE) = Packet Size
</code></pre>
<p>The new clock rate is only applied when entering the transmission phase; the
ping phase runs at a constant 2048 bits-per-second. The formula for the ne
clock rate is as follows:</p>
<pre><code>DMG-07 Bits-Per-Second --&gt; 4194304 / ((6 * RATE) + 512)
</code></pre>
<p>The lowest setting (RATE = 0) runs the DMG-07 at the normal speed DMGs usually
transfer data (1KB/s), while setting it to 0xFF runs it close to the slowest
speed (2042 bits-per-second).</p>
<p>SIZE sets the length of packets exchanged between all Game Boys. Nothing fancy,
just the number of bytes in each packet. It probably shouldn’t be set to zero.</p>
<h3 id="transmission-phase"><a class="header" href="#transmission-phase">Transmission Phase</a></h3>
<p>When the master Game Boy (Player 1) is ready, it should send 4 bytes
(<code>0xAA 0xAA 0xAA 0xAA</code>, if those are actually required should be investigated further).
This alerts the DMG-07 to start the transmission phase. The RATE and SIZE parameters 
are applied at this point. The protocol is simple: Each Game Boy sends a packet to
the DMG-07 simultaneously, then the DMG-07 outputs each packet to all connected
Game Boys. All data is buffered, so there is a 4 packet delay after each Game
Boy submits their data (the delay is still 4 packets long even if some Game Boys
are not connected). For example, say the packet size is 4 bytes; the flow of
data would look like this when sending:</p>
<table><thead><tr><th>P1 send</th><th>P2 send</th><th>P3 send</th><th>P4 send</th><th>Transfer count</th></tr></thead><tbody>
<tr><td>P1 (byte 1)</td><td>P2 (byte 1)</td><td>P3 (byte 1)</td><td>P4 (byte 1)</td><td>0</td></tr>
<tr><td>P1 (byte 2)</td><td>P2 (byte 2)</td><td>P3 (byte 2)</td><td>P4 (byte 2)</td><td>1</td></tr>
<tr><td>P1 (byte 3)</td><td>P2 (byte 3)</td><td>P3 (byte 3)</td><td>P4 (byte 3)</td><td>2</td></tr>
<tr><td>P1 (byte 4)</td><td>P2 (byte 4)</td><td>P3 (byte 4)</td><td>P4 (byte 4)</td><td>3</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>4 (Typically supposed to be zero, but DMG-07 ignores anything here)</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>5</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>6</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>7</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>8</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>9</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>10</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>11</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>12</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>13</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>14</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>15</td></tr>
</tbody></table>
<p>And when receiving, the flow of data would look like this:</p>
<table><thead><tr><th>P1 receive</th><th>P2 receive</th><th>P3 receive</th><th>P4 receive</th><th>Transfer count</th></tr></thead><tbody>
<tr><td>P1 (byte 1)</td><td>P1 (byte 1)</td><td>P1 (byte 1)</td><td>P1 (byte 1)</td><td>16</td></tr>
<tr><td>P1 (byte 2)</td><td>P1 (byte 2)</td><td>P1 (byte 2)</td><td>P1 (byte 2)</td><td>17</td></tr>
<tr><td>P1 (byte 3)</td><td>P1 (byte 3)</td><td>P1 (byte 3)</td><td>P1 (byte 3)</td><td>18</td></tr>
<tr><td>P1 (byte 4)</td><td>P1 (byte 4)</td><td>P1 (byte 4)</td><td>P1 (byte 4)</td><td>19</td></tr>
<tr><td>P2 (byte 1)</td><td>P2 (byte 1)</td><td>P2 (byte 1)</td><td>P2 (byte 1)</td><td>20</td></tr>
<tr><td>P2 (byte 2)</td><td>P2 (byte 2)</td><td>P2 (byte 2)</td><td>P2 (byte 2)</td><td>21</td></tr>
<tr><td>P2 (byte 3)</td><td>P2 (byte 3)</td><td>P2 (byte 3)</td><td>P2 (byte 3)</td><td>22</td></tr>
<tr><td>P2 (byte 4)</td><td>P2 (byte 4)</td><td>P2 (byte 4)</td><td>P2 (byte 4)</td><td>23</td></tr>
<tr><td>P3 (byte 1)</td><td>P3 (byte 1)</td><td>P3 (byte 1)</td><td>P3 (byte 1)</td><td>24</td></tr>
<tr><td>P3 (byte 2)</td><td>P3 (byte 2)</td><td>P3 (byte 2)</td><td>P3 (byte 2)</td><td>25</td></tr>
<tr><td>P3 (byte 3)</td><td>P3 (byte 3)</td><td>P3 (byte 3)</td><td>P3 (byte 3)</td><td>26</td></tr>
<tr><td>P3 (byte 4)</td><td>P3 (byte 4)</td><td>P3 (byte 4)</td><td>P3 (byte 4)</td><td>27</td></tr>
<tr><td>P4 (byte 1)</td><td>P4 (byte 1)</td><td>P4 (byte 1)</td><td>P4 (byte 1)</td><td>28</td></tr>
<tr><td>P4 (byte 2)</td><td>P4 (byte 2)</td><td>P4 (byte 2)</td><td>P4 (byte 2)</td><td>29</td></tr>
<tr><td>P4 (byte 3)</td><td>P4 (byte 3)</td><td>P4 (byte 3)</td><td>P4 (byte 3)</td><td>30</td></tr>
<tr><td>P4 (byte 4)</td><td>P4 (byte 4)</td><td>P4 (byte 4)</td><td>P4 (byte 4)</td><td>31</td></tr>
</tbody></table>
<p>Again, due to buffering, data output to the DMG-07 is actually delayed by
several transfers according to the size of the packets. All connected Game
Boys should send their data into the buffer during the first few transfers.
Here, the packet size is 4 bytes, so each Game Boy should submit their data
during the first 4 transfers. The other 12 transfers don’t care what the
Game Boys send; it won’t enter into the buffer. The next 16 transfers return
the packets each Game Boy previously sent (if no Game Boy exists for player,
that slot is filled with zeroes).</p>
<p>With the buffering system, Game Boys would normally be reading data from
previous packets during transfers 0-15, in addition to sending new packets.
Likewise, during transfers 16-19 each Game Boy is sending new packets. In
effect, while receiving old data, Game Boys are supposed to pump new data into
the network.</p>
<p>When the DMG-07 enters the transmission phase, the buffer is initially filled
with garbage data that is based on output the master Game Boy had sent during
the ping phase. At this time, it is recommended to ignore the earliest packets
received, however, it is safe to start putting new, relevant data into the
buffer.</p>
<h3 id="restarting-ping-phase"><a class="header" href="#restarting-ping-phase">Restarting Ping Phase</a></h3>
<p>It’s possible to restart the ping phase while operating in the transmission
phase. To do so, the master Game Boy should send 4 or more bytes
(<code>0xFF 0xFF 0xFF 0xFF</code>, it’s possible fewer 0xFF bytes need to be sent,
but this has not been extensively investigated yet). The bytes alert the DMG-07
that the ping phase should begin again, after which it sends ping packets after
a brief delay. During this delay, the transmission protocol is still working as
intended until the switch happens.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Gameboy_Camera.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="Shark_Cheats.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Gameboy_Camera.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="Shark_Cheats.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
